<%- include("header") -%>


  <script type="text/javascript">
  window.onload = function () {
    var spendingChart = new CanvasJS.Chart("spendingChart",
    {
      axisY:{
        prefix: "$"
      },
      axisX:{
        interval: 1,
        intervalType: "month"
      },
      data: [{
        type: "column",
        dataPoints: []
      }]
    });
    <% monthlySpending.forEach(function(item) { %>
        spendingChart.options.data[0].dataPoints.push({x: new Date(<%=  item._id.year  %>, <%=  item._id.month  %>), y: <%=  item.cost  %>})
    <% }) %>
    spendingChart.render();

    var incomeChart = new CanvasJS.Chart("incomeChart",
    {
      axisY:{
        prefix: "$"
      },
      axisX:{
        interval: 1,
        intervalType: "month"
      },
      data: [{
        type: "column",
        dataPoints: []
      }]
    });
    <% monthlyIncome.forEach(function(item) { %>
        incomeChart.options.data[0].dataPoints.push({x: new Date(<%=  item._id.year  %>, <%=  item._id.month  %>), y: <%=  item.earnings  %>})
    <% }) %>
    incomeChart.render();

    var earningsChart = new CanvasJS.Chart("earningsChart",
    {
      axisY:{
        prefix: "$"
      },
      axisX:{
        interval: 1,
        intervalType: "month"
      },
      data: [{
        type: "column",
        dataPoints: []
      }]
    });
    <% monthlyNetEarnings.forEach(function(item) { %>
        earningsChart.options.data[0].dataPoints.push({x: new Date(<%=  item._id.year  %>, <%=  item._id.month  %>), y: <%=  item.earnings  %>})
    <% }) %>
    earningsChart.render();
  }
  </script>

  <div class="box" id="heading">
    <h1> Monthly Spending </h1>
  </div>
  <div class="box">
    <div id="spendingChart" style="height: 300px; width: 100%;"></div>
  </div>

  <div class="box" id="heading">
    <h1> Monthly Income </h1>
  </div>
  <div class="box">
    <div id="incomeChart" style="height: 300px; width: 100%;"></div>
  </div>

  <div class="box" id="heading">
    <h1> Monthly Net Savings </h1>
  </div>
  <div class="box">
    <div id="earningsChart" style="height: 300px; width: 100%;"></div>
  </div>

  <script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

<%- include("footer") -%>
